{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aAGA,MACMC,EAAOC,SAASC,cAAc,kBAC9BC,EAAaF,SAASG,kBAAkB,SAAS,GACjDC,EAAeJ,SAASG,kBAAkB,WAAW,GAErDE,EAAoB,CACxBC,MAAO,GACPC,QAAS,KA6BX,WACE,IAAK,EAAAC,EAAAC,MArCkB,uBAwChB,CACL,MAAMC,GAAkB,EAAAF,EAAAC,MAzCH,uBAyDAE,EAfLD,EAgBlBR,EAAWU,MAAQD,EAAKL,MACxBF,EAAaQ,MAAQD,EAAKJ,QAG5B,SAA4BI,GAC1BN,EAAkBC,MAAQK,EAAKL,MAC/BD,EAAkBE,QAAUI,EAAKJ,QArB/BM,CAAmBH,QAUrBR,EAAWU,MAAQ,GACnBR,EAAaQ,MAAQ,GAfnBE,IAkBJ,IAAyBH,EA/CzBI,GAEA,MAAMC,EAAgBC,EAAApB,GAAEqB,UACtB,KAAM,EAAAV,EAAAW,MAAK,sBAAuBd,IAClC,KAiCF,SAASS,IACPT,EAAkBC,MAAQ,GAC1BD,EAAkBE,QAAU,GAhC9BL,EAAWkB,iBAAiB,SAASC,IACnChB,EAAkBC,MAAQe,EAAMC,OAAOV,MACvCI,OAGFZ,EAAagB,iBAAiB,SAASC,IACrChB,EAAkBE,QAAUc,EAAMC,OAAOV,MACzCI,OAGFjB,EAAKqB,iBAAiB,UAAUC,IAC9BA,EAAME,iBACNC,QAAQC,IAAIpB,GAEZN,EAAK2B,SACL,EAAAlB,EAAAmB,QAhCuB,uBAiCvBb","sources":["src/js/03-feedback.js"],"sourcesContent":["import _ from 'lodash';\nimport { save, load, remove } from './storage.js';\n\nconst LOCALSTORAGE_KEY = 'feedback-form-state';\nconst form = document.querySelector('.feedback-form');\nconst emailInput = document.getElementsByName('email')[0];\nconst messageInput = document.getElementsByName('message')[0];\n\nconst feedbackFormState = {\n  email: '',\n  message: '',\n};\n\nupdateData();\n\nconst throttledSave = _.throttle(\n  () => save('feedback-form-state', feedbackFormState),\n  500\n);\n\nemailInput.addEventListener('input', event => {\n  feedbackFormState.email = event.target.value;\n  throttledSave();\n});\n\nmessageInput.addEventListener('input', event => {\n  feedbackFormState.message = event.target.value;\n  throttledSave();\n});\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  console.log(feedbackFormState);\n\n  form.reset();\n  remove(LOCALSTORAGE_KEY);\n  resetFeedbackFormState();\n});\n\nfunction updateData() {\n  if (!load(LOCALSTORAGE_KEY)) {\n    resetInputValues();\n    resetFeedbackFormState();\n  } else {\n    const dataFromStorage = load(LOCALSTORAGE_KEY);\n    setInputsValues(dataFromStorage);\n    setFormStateValues(dataFromStorage);\n  }\n}\n\nfunction resetFeedbackFormState() {\n  feedbackFormState.email = '';\n  feedbackFormState.message = '';\n}\n\nfunction resetInputValues() {\n  emailInput.value = '';\n  messageInput.value = '';\n}\n\nfunction setInputsValues(data) {\n  emailInput.value = data.email;\n  messageInput.value = data.message;\n}\n\nfunction setFormStateValues(data) {\n  feedbackFormState.email = data.email;\n  feedbackFormState.message = data.message;\n}\n"],"names":["$kEUo3","parcelRequire","$945622fd0f572e60$var$form","document","querySelector","$945622fd0f572e60$var$emailInput","getElementsByName","$945622fd0f572e60$var$messageInput","$945622fd0f572e60$var$feedbackFormState","email","message","$5uEKZ","load","dataFromStorage","data","value","$945622fd0f572e60$var$setFormStateValues","$945622fd0f572e60$var$resetFeedbackFormState","$945622fd0f572e60$var$updateData","$945622fd0f572e60$var$throttledSave","$parcel$interopDefault","throttle","save","addEventListener","event","target","preventDefault","console","log","reset","remove"],"version":3,"file":"03-feedback.a8492ce1.js.map"}